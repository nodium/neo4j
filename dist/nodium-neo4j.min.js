!function e(n,o,t){function r(i,s){if(!o[i]){if(!n[i]){var d="function"==typeof require&&require;if(!s&&d)return d(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=o[i]={exports:{}};n[i][0].call(f.exports,function(e){var o=n[i][1][e];return r(o?o:e)},f,f.exports,e,n,o,t)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e){!function(n){"use strict";var o=n.Nodium,t=o.context.jQuery;e("./nodium-neo4j")(o,t)}(window)},{"./nodium-neo4j":3}],2:[function(e,n){n.exports=function(e,n){"use strict";function o(e){var n=i,o=n.host,t=n.port,r="http://"+o;return t&&(r+=":"+t),e&&(r+=e),r}function t(){return o("/db/data/cypher")}function r(e){var n="/db/data/relationship";return e&&(n+="/"+id),o(n)}function a(e){var n="/db/data/node";return e&&(n+="/"+e),o(n)}var i,s=e.api,d=e.model,u=e.transformer,f=(e.event.NodeEvent,e.event.EdgeEvent,{host:"localhost",port:7474,version:2});s.Neo4jAPI=e.createClass({construct:function(e){i=n.extend({},f,e)},getGraph:function(){return new Promise(function(e){var o,r,a;r=1===i.version?"START n=node(*) RETURN n":"START n=node(*) RETURN n, labels(n)",o={query:r,params:{}},a=t(),n.post(a,o).done(function(o){var t={query:"START r=relationship(*) RETURN r",params:{}};n.post(a,t).done(function(n){var t=u.neo4j.from(o,n);e(t)})})})},createNode:function(e){return console.log("createNode"),new Promise(function(o){var t,r;t=u.neo4j.toNode(e),r=a(),n.ajax({url:r,data:t,type:"POST",async:!1}).done(function(e){var n=u.neo4j.idFromSelf(e.self);o(n)})})},deleteNode:function(e){console.log("deleteNode");var o,r,a=t();r=1===i.version?"START n=node("+e._id+") MATCH n-[r?]-() DELETE n,r":"START n=node("+e._id+") OPTIONAL MATCH n-[r]-() DELETE n,r",o={query:r,params:{}},n.post(a,o)},createEdge:function(e){return new Promise(function(o){var t,i;t={to:r(e.to._id),type:e.type},i=a(e.from._id)+"/relationships",n.post(i,t).done(function(e){var n=u.neo4j.idFromSelf(e.self);o(n)})})},deleteEdge:function(e){var o=r(e._id);n.ajax({url:o,type:"DELETE"})},updateNode:function(e){var o,t;console.log("updateNode"),o=u.neo4j.toNode(e),t=a(e._id)+"/properties",console.log(o),console.log(t),n.ajax({url:t,type:"PUT",data:o})},updateNodeLabel:function(e){var o;1!==i.version&&update.changed(d.Node.getLabelsPath())&&(console.log("api: handling node label update"),console.log(e._id),o=a(e._id)+"/labels",n.ajax({url:o,type:"PUT",contentType:"application/json",data:JSON.stringify(e._labels)}))}})}},{}],3:[function(e,n){n.exports=function(n){var o=n.context.jQuery;e("./api/Neo4jAPI")(n,o),e("./transformer/Neo4jTransformer")(n,o)}},{"./api/Neo4jAPI":2,"./transformer/Neo4jTransformer":4}],4:[function(e,n){n.exports=function(e,n,o){"use strict";var e=e,t=e.model,r=e.transformer;r.Neo4jTransformer=e.createClass(r.AbstractDataTransformer,{construct:function(){r.neo4j=this},idFromSelf:function(e){var n,o=e.lastIndexOf("/");return-1==o?null:n=e.substring(o+1,e.length)},from:function(e,r){for(var a,i,s,d,u,f,c=[],l=[],p={},v=0,h=this.options.map,m=0;m<e.data.length;m++)if(u={},f={},i=e.data[m][0],s=e.data[m][1],i&&p[i.self]===o){for(var g in i.data)h.hasOwnProperty(g)?f[h[g]]=i.data[g]:u[g]=i.data[g];p[i.self]=v,v++,a=t.Node.create(u,s,this.idFromSelf(i.self)),n.extend(a,f),c.push(a)}for(var m=0;m<r.data.length;m++)d=r.data[m][0],d&&l.push({_id:this.idFromSelf(d.self),source:p[d.start],target:p[d.end],type:d.type});return console.log("nodes"),console.log(c),{nodes:c,edges:l}},to:function(e,o){var t,r,a,i,s=[],d=[];if(e)for(var u=0;u<e.length;u++)t=e[u],a=this.getMappedProperties(t),i=n.extend({},t._properties,a),s.push(i);if(o)for(var u=0;u<o.length;u++)r=o[u],d.push(r);return{nodes:s,edges:d}},toNode:function(e){return this.to([e]).nodes[0]}})}},{}]},{},[1]);