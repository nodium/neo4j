!function e(n,t,r){function o(i,s){if(!t[i]){if(!n[i]){var d="function"==typeof require&&require;if(!s&&d)return d(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var f=t[i]={exports:{}};n[i][0].call(f.exports,function(e){var t=n[i][1][e];return o(t?t:e)},f,f.exports,e,n,t,r)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e){!function(n){"use strict";e("./nodium-neo4j")(n.Nodium)}(window)},{"./nodium-neo4j":3}],2:[function(e,n){n.exports=function(e,n){"use strict";function t(e){var n=i,t=n.host,r=n.port,o="http://"+t;return r&&(o+=":"+r),e&&(o+=e),o}function r(){return t("/db/data/cypher")}function o(){var e="/db/data/relationship";return id&&(e+="/"+id),t(e)}function a(e){var n="/db/data/node";return id&&(n+="/"+e),t(n)}var i,s=e.api,d=e.model,u=e.transformer,f=(e.event.NodeEvent,e.event.EdgeEvent,{host:"localhost",port:7474,version:2});s.Neo4jAPI=e.createClass({construct:function(e){i=n.extend({},f,e)},getGraph:function(){return new Promise(function(e){var t,o,a;o=1===i.version?"START n=node(*) RETURN n":"START n=node(*) RETURN n, labels(n)",t={query:o,params:{}},a=r(),n.post(a,t).done(function(t){var r={query:"START r=relationship(*) RETURN r",params:{}};n.post(a,r).done(function(n){var r=u.neo4j.from(t,n);e(r)})})})},createNode:function(e){return new Promise(function(t){var r,o;r=u.neo4j.toNode(e),o=a(),n.ajax({url:o,data:r,type:"POST",async:!1}).done(function(e){var n=u.neo4j.idFromSelf(e.self);t(n)})})},deleteNode:function(e){var t,o,a=r();o=1===i.version?"START n=node("+e._id+") MATCH n-[r?]-() DELETE n,r":"START n=node("+e._id+") OPTIONAL MATCH n-[r]-() DELETE n,r",t={query:o,params:{}},n.post(a,t)},createEdge:function(e){return new Promise(function(t){var r,i;r={to:o(e.to._id),type:e.type},i=a(e.from._id)+"/relationships",n.post(i,r).done(function(e){var n=u.neo4j.idFromSelf(e.self);t(n)})})},deleteEdge:function(e){var t=o(e._id);n.ajax({url:t,type:"DELETE"})},updateNode:function(e){var t,r;t=u.neo4j.toNode(e),r=a(e._id)+"/properties",n.ajax({url:r,type:"PUT",data:t})},updateNodeLabel:function(e){var t;1!==i.version&&update.changed(d.Node.getLabelsPath())&&(console.log("api: handling node label update"),console.log(e._id),t=a(e._id)+"/labels",n.ajax({url:t,type:"PUT",contentType:"application/json",data:JSON.stringify(e._labels)}))}})}},{}],3:[function(e,n){n.exports=function(n){var t=n.context.jQuery;e("./api/Neo4jAPI")(n,t),e("./transformer/Neo4jTransformer")(n,t)}},{"./api/Neo4jAPI":2,"./transformer/Neo4jTransformer":4}],4:[function(e,n){n.exports=function(e,n,t){"use strict";var e=e,r=e.model,o=e.transformer;o.Neo4jTransformer=e.createClass(o.AbstractDataTransformer,{construct:function(){o.neo4j=this},idFromSelf:function(e){var n,t=e.lastIndexOf("/");return-1==t?null:n=e.substring(t+1,e.length)},from:function(e,o){for(var a,i,s,d,u,f,c=[],l=[],p={},v=0,h=this.options.map,m=0;m<e.data.length;m++)if(u={},f={},i=e.data[m][0],s=e.data[m][1],i&&p[i.self]===t){for(var T in i.data)h.hasOwnProperty(T)?f[h[T]]=i.data[T]:u[T]=i.data[T];p[i.self]=v,v++,a=r.Node.create(u,s,this.idFromSelf(i.self)),n.extend(a,f),c.push(a)}for(var m=0;m<o.data.length;m++)d=o.data[m][0],d&&l.push({_id:this.idFromSelf(d.self),source:p[d.start],target:p[d.end],type:d.type});return console.log("nodes"),console.log(c),{nodes:c,edges:l}},to:function(e,t){var r,o,a,i,s=[],d=[];if(e)for(var u=0;u<e.length;u++)r=e[u],a=this.getmappedProperties(r),i=n.extend({},r._properties,a),s.push(i);if(t)for(var u=0;u<t.length;u++)o=t[u],d.push(o);return{nodes:s,edges:d}},toNode:function(e){return this.to([e]).nodes[0]}})}},{}]},{},[1]);